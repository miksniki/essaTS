{"version":3,"sources":["components/Lugu/Lugu.tsx","components/Lood/Lood.tsx","components/ValitudLugu/ValitudLugu.tsx","components/Menu/Menu.tsx","App.tsx","index.tsx"],"names":["Lugu","looPilt","handleClick","index","src","className","alt","onClick","data-index","Lood","playlist","map","lugu","i","key","ValitudLugu","axios","require","Menu","useState","activeIndex","setActiveIndex","useForm","register","handleSubmit","uploadedFiles","setUploadedFile","musicRef","useRef","useEffect","current","heliFail","onSubmit","data","a","formData","FormData","append","file","fetch","method","body","then","res","json","alert","JSON","stringify","getFiles","files","splitAudio","fileName","console","warn","getEditedFiles","valitudLood","setValitudLood","editedSongs","setEditedSongs","downloadFile","blob","url","window","URL","createObjectURL","document","createElement","href","download","click","checkboxChange","e","checkedSongs","target","value","includes","filter","deleteAudio","length","style","paddingTop","laulja","looNimi","ref","autoPlay","controls","newActiveIndex","getAttribute","type","name","accept","id","onChange","concatAudio","Blob","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.261ece0c.chunk.js","sourcesContent":["import React from 'react';\nimport './Lugu.scss';\n\ntype Props = {\n    looPilt: string;\n    handleClick: any;\n    index: number\n}\n\nconst Lugu: React.FC<Props> = ({ looPilt, handleClick, index }) => {\n    return (\n        <div>\n           <img \n                src={looPilt} \n                className=\"pildike\" \n                alt=\"pildike\" \n                onClick={handleClick} \n                data-index={index}\n           />\n        </div>\n    )\n}\n\nexport default Lugu;","import React from 'react';\nimport Lugu from '../Lugu/Lugu';\n\ntype Props = {\n    playlist: any[];\n    handleClick: any;\n}\n\nconst Lood: React.FC<Props> = ({ playlist, handleClick }) => {\n    return (\n        <div>\n            <div>\n                {\n                playlist.map(((lugu:any, i:number) => {\n                    return (\n                        <Lugu \n                            key={lugu.looPilt} \n                            looPilt={lugu.looPilt}\n                            handleClick={handleClick}\n                            index={i}\n                        />\n                    )\n                }))}\n            </div>\n        </div>\n    )\n}\n\nexport default Lood;","import React from 'react';\nimport './ValitudLugu.scss';\n\nconst ValitudLugu: React.FC<any> = ({ lugu }) => {\n    return (\n        <div>\n            <img src={lugu.looPilt} alt='pildike'/>\n            \n        </div>\n    )\n}\n\nexport default ValitudLugu;","import React, { useState, useEffect, useRef, FC } from 'react';\nimport { useForm } from 'react-hook-form';\nimport Lood from '../Lood/Lood';\nimport ValitudLugu from '../ValitudLugu/ValitudLugu';\n\nimport './Menu.scss';\n\nconst axios = require('axios');\nconst playlist = require('../../songPlaylist.json');\n\n\nconst Menu: FC = () => {\n    \n    const [activeIndex, setActiveIndex] = useState<number>(0);\n    const { register, handleSubmit } = useForm<any>();\n    const [uploadedFiles, setUploadedFile] = useState<any>();\n\n    const musicRef = useRef<HTMLAudioElement>(null);\n\n    useEffect(() => {\n        if(musicRef.current && musicRef.current.src !== playlist[activeIndex].heliFail)\n            musicRef.current.src = playlist[activeIndex].heliFail\n    }, [activeIndex]);\n\n    const handleClick = (e:any) => {\n        const newActiveIndex = e.target.getAttribute('data-index')\n        setActiveIndex( newActiveIndex )\n    };\n\n    const onSubmit = async (data:any) => {\n        const formData = new FormData();\n        formData.append('file', data.file[0]);\n\n        const res = await fetch('http://localhost:5000/upload', {\n            method: \"POST\",\n            body: formData\n        }).then(res => res.json())\n        alert(JSON.stringify(res))\n    };\n\n    const getFiles = async () => {\n        await fetch('http://localhost:5000/songs')\n            .then(res => res.json())\n            .then(files => setUploadedFile(files.files))\n    };\n\n    const splitAudio = async (fileName: string) => {\n        fetch(`http://localhost:5000/${fileName}/split`) \n            .then(res => res.json())\n            .then(function(data){alert(JSON.stringify(data))\n            console.warn(data)\n        })\n        getEditedFiles();\n    \n    }\n\n    const [valitudLood, setValitudLood] = useState<any>([]);\n    const [editedSongs, setEditedSongs] = useState<any>();\n\n    const getEditedFiles = async () => {\n        await fetch('http://localhost:5000/editedSongs')\n            .then(res => res.json())\n            .then(files => setEditedSongs(files.files))\n    };\n\n    const download = (fileName:any) => {\n        const blob = new Blob(['audio'], {type: 'audio/mpeg'})\n        downloadFile(blob, `${fileName}`);\n    }\n\n    const downloadFile = (blob:any, fileName:any) => {\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href= url;\n        a.download = fileName;\n        a.click();\n    }\n\n    const checkboxChange = (e:any) => {\n        let checkedSongs = [...valitudLood, e.target.value];\n        if(valitudLood.includes(e.target.value )) {\n            checkedSongs = checkedSongs.filter(file => file !== e.target.value);\n        }\n        setValitudLood(checkedSongs)\n    }\n\n    const concatAudio = (valitudLood:string[]) => {\n        if (valitudLood.length === 2){\n            axios({\n            method: \"POST\",\n            url: 'http://localhost:5000/concat',\n            data: valitudLood\n            })\n            getEditedFiles();\n        } else {\n            alert(\"You need to select 2 songs!\")\n        }\n\n        \n    }  \n\n    const deleteAudio = async (fileName:string) => {\n        axios({\n            method: \"POST\",\n            url: 'http://localhost:5000/delete',\n            data: {\n                files : `${fileName}`\n            }\n        })\n        getEditedFiles();        \n    }\n    \n\n    return(\n        <div className=\"menu\">\n            {/* valitud loo preview */}\n            <div className=\"container1\">\n                {playlist.length &&  <ValitudLugu lugu={playlist[activeIndex]}/>}\n                <p style={{paddingTop: '350px'}}>\n                    {playlist.length && \n                    <p>{(`Now playing: ${playlist[activeIndex].laulja} - ${playlist[activeIndex].looNimi}`)}</p>}</p>\n                <audio ref={musicRef} autoPlay controls />\n            </div>\n            {/* lugude list */}\n            <div className=\"container2\">\n                <h1>Pick a song!</h1>\n                <Lood playlist={playlist} handleClick={handleClick}/>\n            </div>\n            {/* lugude uploadi form */}\n            <div>\n                <form onSubmit={handleSubmit(onSubmit)}>\n                    <input ref={register} type=\"file\" name=\"file\" accept=\"audio/mpeg\" />\n                    <button>Submit</button>\n                </form>\n            </div>\n\n            {/* uploaditud lugude sektsioon */}\n            <div>\n                <button onClick={getFiles}>Show uploaded songs</button>\n                {uploadedFiles ? (\n                <div>\n                    {uploadedFiles.map((fileName: string) =>\n                        <div className=\"uploadedSongs\">\n                            <h1>\n                                {fileName}\n                                <input type=\"checkbox\" id={fileName} value={fileName} onChange={checkboxChange}></input>\n                            </h1>\n                            <audio src={'/' + fileName} controls />\n                            <button onClick={() => splitAudio(fileName)}>Split audio</button>                           \n                        </div>\n                    )}\n                    <button onClick={() => concatAudio(valitudLood)}>Concat selected songs</button>\n                    <button onClick={getEditedFiles}>Show edited songs</button>\n                    {editedSongs ? (\n                    <div>\n                        {editedSongs.map((fileName: string) => \n                        <div className=\"editedSongs\">\n                            <h1>\n                            {fileName}\n                            </h1>\n                            <audio src={'/' + fileName} controls />\n                            <button onClick={() => download(fileName)}>Download</button>\n                            <button onClick={() => deleteAudio(fileName)}>Delete</button>\n                        </div>\n                        )}\n                    </div>\n                    ): null}\n                    </div>               \n                ) : null}\n            </div>\n        </div>\n    )\n}\n\nexport default Menu;\n","import React from 'react';\nimport './App.scss';\nimport Menu from './components/Menu/Menu';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Menu />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}