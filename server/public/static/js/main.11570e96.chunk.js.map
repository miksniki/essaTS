{"version":3,"sources":["components/Lugu/Lugu.tsx","components/Lood/Lood.tsx","components/ValitudLugu/ValitudLugu.tsx","components/Menu/Menu.tsx","App.tsx","index.tsx"],"names":["Lugu","looPilt","handleClick","index","src","className","alt","onClick","data-index","Lood","playlist","map","lugu","i","key","ValitudLugu","require","Menu","useState","activeIndex","setActiveIndex","useForm","register","handleSubmit","uploadedFile","setUploadedFile","editSong","setEditSong","musicRef","useRef","useEffect","current","heliFail","onSubmit","data","a","formData","FormData","append","file","fetch","method","body","then","res","json","alert","JSON","stringify","getFiles","files","splitAudio","headers","console","warn","length","style","paddingTop","laulja","looNimi","ref","autoPlay","controls","e","newActiveIndex","target","getAttribute","type","name","accept","log","array","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.11570e96.chunk.js","sourcesContent":["import React from 'react';\nimport './Lugu.scss';\n\ntype Props = {\n    looPilt: string;\n    handleClick: any;\n    index: number\n}\n\nconst Lugu: React.FC<Props> = ({ looPilt, handleClick, index }) => {\n    return (\n        <div>\n           <img \n                src={looPilt} \n                className=\"pildike\" \n                alt=\"pildike\" \n                onClick={handleClick} \n                data-index={index}\n           />\n        </div>\n    )\n}\n\nexport default Lugu;","import React from 'react';\nimport Lugu from '../Lugu/Lugu';\n\ntype Props = {\n    playlist: any[];\n    handleClick: any;\n}\n\nconst Lood: React.FC<Props> = ({ playlist, handleClick }) => {\n    return (\n        <div>\n            <div>\n                {\n                playlist.map(((lugu:any, i:number) => {\n                    return (\n                        <Lugu \n                            key={lugu.looPilt} \n                            looPilt={lugu.looPilt}\n                            handleClick={handleClick}\n                            index={i}\n                        />\n                    )\n                }))}\n            </div>\n        </div>\n    )\n}\n\nexport default Lood;","import React from 'react';\nimport './ValitudLugu.scss';\n\nconst ValitudLugu: React.FC<any> = ({ lugu }) => {\n    return (\n        <div>\n            <img src={lugu.looPilt} alt='pildike'/>\n            \n        </div>\n    )\n}\n\nexport default ValitudLugu;","import React, { useState, useEffect, useRef, FC } from 'react';\nimport { useForm } from 'react-hook-form';\nimport Lood from '../Lood/Lood';\nimport ValitudLugu from '../ValitudLugu/ValitudLugu';\n\nimport './Menu.scss';\n\nconst playlist = require('../../songPlaylist.json');\n\n\nconst Menu: FC = () => {\n    \n    const [activeIndex, setActiveIndex] = useState<number>(0);\n    const { register, handleSubmit } = useForm<any>();\n    const [uploadedFile, setUploadedFile] = useState<any>();\n    const [editSong, setEditSong] = useState<any>();\n\n    const musicRef = useRef<HTMLAudioElement>(null);\n\n    useEffect(() => {\n        if(musicRef.current)\n            musicRef.current.src = playlist[activeIndex].heliFail\n    }, [activeIndex]);\n\n    const handleClick = (e:any) => {\n        const newActiveIndex = e.target.getAttribute('data-index')\n        setActiveIndex( newActiveIndex )\n    };\n\n    const onSubmit = async (data:any) => {\n        const formData = new FormData();\n        formData.append('file', data.file[0]);\n\n        const res = await fetch('http://localhost:5000/upload', {\n            method: \"POST\",\n            body: formData\n        }).then(res => res.json())\n        alert(JSON.stringify(res))\n    };\n\n    const renderValitudLugu = () => {\n        if(playlist.length) {\n            return (\n                <ValitudLugu lugu={playlist[activeIndex]}/>\n            )\n        }\n        return null\n    };\n\n    const renderValitudTekst = () => {\n        if(playlist.length) {\n            return (\n                    <p>{(`Now playing: ${playlist[activeIndex].laulja} - ${playlist[activeIndex].looNimi}`)}</p>\n            )\n        }\n        return null\n    };\n       \n    const getFiles = async () => {\n        await fetch('http://localhost:5000/songs')\n            .then(res => res.json())\n            .then(files => setUploadedFile(files))\n    };\n\n    const splitAudio = async () => {\n        let file = editSong;    /* editsong on state */\n        let data = new FormData();\n        data.append('file', file)\n\n        fetch(`http://localhost:5000/split/'${file}/split`, {    \n            method: \"POST\",\n            body: JSON.stringify(data),\n            headers: { 'Content-type': 'application/json'}\n        })\n        .then(res => res.json())\n        .then(function(data){alert(JSON.stringify(data))\n        console.warn(data)\n        })\n    }\n\n\n    return(\n        <div className=\"menu\">\n            {/* valitud loo preview */}\n            <div className=\"container1\">\n                {renderValitudLugu()}\n                <p style={{paddingTop: '350px'}}>{renderValitudTekst()}</p>\n                <audio ref={musicRef} autoPlay controls />\n            </div>\n            {/* lugude list */}\n            <div className=\"container2\">\n                <h1>Pick a song!</h1>\n                <Lood playlist={playlist} handleClick={handleClick}/>\n            </div>\n            {/* lugude uploadi form */}\n            <div>\n                <form onSubmit={handleSubmit(onSubmit)}>\n                    <input ref={register} type=\"file\" name=\"file\" accept=\"audio/mpeg\" />\n                    <button>Submit</button>\n                </form>\n            </div>\n\n            {/* uploaditud lugude sektsioon */}\n \n            {console.log(uploadedFile)}\n            <div>\n                <button onClick={getFiles}>Show uploaded songs</button>\n                {uploadedFile ? (\n                <div>\n                    {uploadedFile.files.map((array:any) => array.map((file:any) => \n                        <div>\n                            <h1>{file}</h1>\n                            <audio src={'/' + file} controls />\n                            <button onClick={splitAudio}>Split audio</button> \n                            {/* TAHAN SIIN SETSTATE EDITSONG  */}\n                            {setEditSong(file)}\n                        </div>\n                    ))}\n                </div>\n                ) : null}\n            </div>\n        </div>\n    )\n}\n\nexport default Menu;\n","import React from 'react';\nimport './App.scss';\nimport Menu from './components/Menu/Menu';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Menu />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}