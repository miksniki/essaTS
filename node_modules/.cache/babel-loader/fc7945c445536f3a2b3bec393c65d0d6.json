{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\muss\\\\muss\\\\src\\\\components\\\\Menu\\\\Menu.tsx\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport Lood from '../Lood/Lood';\nimport ValitudLugu from '../ValitudLugu/ValitudLugu';\nimport axios from 'axios';\nimport './Menu.scss';\n\nconst playlist = require('../../songPlaylist.json');\n\nconst Menu = () => {\n  const [activeIndex, setActiveIndex] = useState(0);\n  const [file, setFile] = useState('');\n  const [fileName, setFileName] = useState('Choose song');\n  const [uploadedFile, setUploadedFile] = useState({});\n\n  const handleClick = e => {\n    const newActiveIndex = e.target.getAttribute('data-index');\n    setActiveIndex(newActiveIndex);\n  };\n\n  const renderValitudLugu = () => {\n    if (playlist.length) {\n      return /*#__PURE__*/React.createElement(ValitudLugu, {\n        lugu: playlist[activeIndex],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 17\n        }\n      });\n    }\n\n    return null;\n  };\n\n  const renderValitudTekst = () => {\n    if (playlist.length) {\n      return /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 21\n        }\n      }, `Now playing: ${playlist[activeIndex].laulja} - ${playlist[activeIndex].looNimi}`);\n    }\n\n    return null;\n  };\n\n  const musicRef = useRef(null);\n  useEffect(() => {\n    if (musicRef.current) musicRef.current.src = playlist[activeIndex].heliFail;\n  }, [activeIndex]); //FAILI UPLOADIMINE\n\n  const chooseFile = e => {\n    setFile(e.target.files[0]);\n    setFileName(e.target.files[0].name);\n  };\n\n  const submitFile = async e => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append('file', file);\n\n    try {\n      const res = await axios.post('localhost:5000/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      const {};\n    } catch (err) {}\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, renderValitudLugu(), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      paddingTop: '350px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, renderValitudTekst()), /*#__PURE__*/React.createElement(\"audio\", {\n    ref: musicRef,\n    autoPlay: true,\n    controls: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }, \"Pick a song!\"), /*#__PURE__*/React.createElement(Lood, {\n    playlist: playlist,\n    handleClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: submitFile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"audioFile\",\n    onChange: chooseFile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"audiFile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, fileName), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Upload\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }))));\n};\n\nexport default Menu;","map":{"version":3,"sources":["C:/Users/Admin/muss/muss/src/components/Menu/Menu.tsx"],"names":["React","useState","useEffect","useRef","Lood","ValitudLugu","axios","playlist","require","Menu","activeIndex","setActiveIndex","file","setFile","fileName","setFileName","uploadedFile","setUploadedFile","handleClick","e","newActiveIndex","target","getAttribute","renderValitudLugu","length","renderValitudTekst","laulja","looNimi","musicRef","current","src","heliFail","chooseFile","files","name","submitFile","preventDefault","formData","FormData","append","res","post","headers","err","paddingTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, FC } from 'react';\r\nimport Lood from '../Lood/Lood';\r\nimport ValitudLugu from '../ValitudLugu/ValitudLugu';\r\nimport axios from 'axios';\r\nimport './Menu.scss';\r\n\r\nconst playlist = require('../../songPlaylist.json')\r\n\r\n\r\nconst Menu: FC = () => {\r\n    \r\n    const [activeIndex, setActiveIndex] = useState<number>(0);\r\n    const [file, setFile] = useState<string>('');\r\n    const [fileName, setFileName] = useState<string>('Choose song');\r\n    const [uploadedFile, setUploadedFile] = useState<any>({});\r\n\r\n    const handleClick = (e:any) => {\r\n        const newActiveIndex = e.target.getAttribute('data-index')\r\n        setActiveIndex( newActiveIndex )\r\n    };\r\n\r\n    const renderValitudLugu = () => {\r\n        if(playlist.length) {\r\n            return (\r\n                <ValitudLugu lugu={playlist[activeIndex]}/>\r\n            )\r\n        }\r\n        return null\r\n    };\r\n\r\n    const renderValitudTekst = () => {\r\n        if(playlist.length) {\r\n            return (\r\n                    <p>{(`Now playing: ${playlist[activeIndex].laulja} - ${playlist[activeIndex].looNimi}`)}</p>\r\n            )\r\n        }\r\n        return null\r\n    };\r\n    \r\n    const musicRef = useRef<HTMLAudioElement>(null);\r\n\r\n    useEffect(() => {\r\n        if(musicRef.current)\r\n            musicRef.current.src = playlist[activeIndex].heliFail\r\n    }, [activeIndex])\r\n\r\n    //FAILI UPLOADIMINE\r\n\r\n    const chooseFile = (e:any) => {\r\n        setFile(e.target.files[0]);\r\n        setFileName(e.target.files[0].name);\r\n    };\r\n\r\n    const submitFile = async (e:any) => {\r\n        e.preventDefault();\r\n        const formData = new FormData();\r\n        formData.append('file', file);\r\n\r\n        try {\r\n            const res = await axios.post('localhost:5000/upload', formData, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n            });\r\n            const {}\r\n        } catch(err) {\r\n\r\n        }\r\n    };\r\n\r\n\r\n    return(\r\n        <div className=\"menu\">\r\n            {/* valitud loo preview */}\r\n            <div className=\"container1\">\r\n                {renderValitudLugu()}\r\n                <p style={{paddingTop: '350px'}}>{renderValitudTekst()}</p>\r\n                <audio ref={musicRef} autoPlay controls />\r\n            </div>\r\n            {/* lugude list */}\r\n            <div className=\"container2\">\r\n                <h1>Pick a song!</h1>\r\n                <Lood playlist={playlist} handleClick={handleClick}/>\r\n            </div>\r\n            {/* lugude upload */}\r\n            <div>\r\n                <form onSubmit={submitFile}>\r\n                    <input type=\"file\" id=\"audioFile\" onChange={chooseFile} />\r\n                    <label htmlFor=\"audiFile\">{fileName}</label>\r\n                    <input type=\"submit\" value=\"Upload\" />\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Menu;\r\n"]},"metadata":{},"sourceType":"module"}